# Create a User-Friendly Config for TON Blockchain 

### While in Russian. In the future, it will be translated and transferred to the Eng version for [TON Documentation](https://github.com/ton-community/ton-docs).

# Network Configs

На этой странице вы можете найти описание сетевых параметров использующихся для 

Экосистема TON имеет сложную конфигурацию со множеством технических параметров. Однако лишь небольшое количество людей понимают, что означают эти параметры. Эта статья необходима для того, чтобы предоставить пользователям простой способ понять параметры и их назначение.

:::info
При прочтении этого материала необходимо дополнительно ознакомиться с самими параметрами. 

Их можно посмотреть в [текущей конфигурации](https://explorer.toncoin.org/config) и в [block.tlb](https://github.com/ton-blockchain/ton/blob/master/crypto/block/block.tlb).
:::


## Param 0

Этот параметр относится к конфигурационному адресу конфига для системы, представленному шестнадцатеричной строкой.


## Param 1

Этот параметр относится к адресу выборщика или валидатора в блокчейне или консенсусной системе, представленному в виде шестнадцатеричной строки.

The [Elector smart contract](https://ton.org/docs/develop/smart-contracts/governance#elector) controls the way how rounds of validation change each other, who gets the duty to validate the blockchain, and how rewards for validation would be distributed. 


## Param 2

Этот параметр представляет собой третий адрес памяти, указанный в виде шестнадцатеричной строки, который представляет адрес чеканщика или создателя 
новых токенов/монет в блокчейне.

:::info
Если отсутствует параметр 2, то используется ConfigParam 0 
:::


## Param 3

Этот параметр является адресом [коллектора](https://ton.org/docs/develop/smart-contracts/governance#elector) комиссий. В случае неустановления комиссий, как это происходит сейчас, вся сумма отправляется на него самого.

:::info
Если отсутствует параметр 3, то используется ConfigParam 1
:::


## Param 4

Этот параметр представляет еще один адрес памяти, указанный в виде шестнадцатеричной строки, который указывает на адрес распознаватель root TON DNS.

:::info
Более подробную информацию можно найти в статье [TON DNS & Domains](https://docs.ton.org/participate/web3/dns) и в более подробном исходном описании [здесь](https://github.com/ton-blockchain/TEPs/blob/master/text/0081-dns-standard.md).
:::


## Param 6

Этот параметр отвечает за комиссии минта новых валют и “доминчивание” уже существующих. 

:::info
Сейчас чеканка дополнительной валюты не реализована и не работает. Реализация и запуск минтера планируется.

На данный момент дополнительно можно ознакомиться с этим в соответствующей статье [здесь](https://docs.ton.org/develop/research-and-development/minter-flow). 
:::


## Param 7

Этот параметр представляет структуру данных с несколькими вложенными полями или свойствами. Каждый корневой узел с двумя рёбрами име  Он задается с помощью нескольких шестнадцатеричных строк, разделенных пробелами (например, x{C_}, x{2_} и т.д.). 
Содержит в себе список валют в виде словаря `“id_валюты”` -> `“количество”`.


## Param 8

Этот параметр связан с глобальная версией сети, служит для определения разрешений или возможностей определенного объекта или компонента. В данном случае, указывается версия `("version:2")` и числовое значение возможностей `("capabilities:46")`. 
Связанная шестнадцатеричная строка `"x{C4000000020000000000000002E}"` является закодированным представлением этих возможностей.

:::info
Используется тип данных `uint32` и `uint64` для поля `version` и `capabilities` соответственно.

В случае отсутствия заданных значений заполняется нулями.
:::


## Param 9

Этот параметр содержит в себе обязательные параметры. Гарантирует, что некоторые параметры конфигурации всегда присутствуют и не могут быть удалены предложением, если параметр 9 не был изменен ранее. 

Представляет поле `mandatory_params` и представляет собой древовидную структуру данных с несколькими вложенными полями и свойствами. Параметр 9 указывается с помощью множества шестнадцатеричных строк, разделенных пробелами. Без дополнительного контекста трудно определить точное значение этого параметра или то, как он используется. Узлы помечаются с использованием различных типов схем маркировки на основе хэшей, таких как `hml_same`, `hml_short` и `hml_long`. Значения конечных узлов либо истинны, либо ложны, в то время как узлы разветвления не имеют значения.


## Param 10

Этот параметр содержит в себе критические параметры, для изменения которых определяются повышенные требования, в связи с чем проводится больше раундов голосования. Описывается данный параметр деревом Меркла, используемое для проверки доставки сообщений.


## Param 11

Этот параметр включает в себя правила голосования валидаторов. Для их изменения требуется больше раундов голосования. 

Работает по принципу "best of three" и "best of five" для normal и critical ситуаций соответственно.


Существуют **рекомендованные** и **критические** правила:

* Нормальная конфигурация используется в простых ситуациях, при соблюдении всех условий в себе

* Критическая конфигурация используется в случае, когда нормальная конфигурация оказывается непригодной для определённого случая

:::info
Настройки блокчейна, указанные в [параметре 10](https://docs.ton.org/develop/howto/network-configs#param-10) используются для критического случая голосования валидаторов. 
:::

### Каждая конфигурация голосования включает следующие поля:

* `min_tot_rounds`: Минимальное общее количество раундов для процесса голосования;

* `max_tot_rounds`: Максимальное общее количество раундов для процесса голосования;

* `min_win`s: Минимальное количество побед (голосов за), необходимое для принятия предложения;

* `max_losses`: Максимальное количество проигравших (голосов против) для того, чтобы предложение провалилось;

* `min_store_sec`: Минимальное время (в секундах), в течение которого должны храниться данные голосования;

* `max_store_sec`: Максимальное время (в секундах), в течение которого могут храниться данные голосования;

* `bit_price`: Занимаемый размер в битах;

* `cell_price`: Стоимость хранения ячейки данных в nano TON.


## Param 12

Этот параметр представляет собой конфигурацию рабочей цепочки (воркчейна) в блокчейне TON. Рабочие цепочки в TON Blockchain спроектированы как независимые блокчейны, которые могут работать параллельно, что позволяет ему масштабировать и обрабатывать очень большое количество транзакций и смарт-контрактов.

### Параметры конфигурации рабочей цепочки (воркчейна): 

* `enabled_since`: Временная метка UNIX с момента включения этой рабочей цепочки;

* `actual_min_split`: Текущая минимальная глубина разделения этой рабочей цепочки;

* `min_split`: Минимальная глубина разделения этой рабочей цепочки;

* `max_split`: Максимальная глубина разделения этой рабочей цепочки;

* `basic`: Логический флаг (1 для true, 0 для false), который может указывать, является ли это базовой рабочей цепочкой;

* `active`: Логический флаг, указывающий, активна ли эта рабочая цепочка в данный момент;

* `accept_msgs`: Логический флаг, указывающий, принимает ли эта рабочая цепочка сообщения в данный момент;

* `flags`: Дополнительные флаги для рабочей цепочки;

* `zerostate_root_hash`: Корневой хэш нулевого состояния рабочей цепочки;

* `zerostate_file_hash`: Файловый хэш нулевого состояния рабочей цепочки;

* `version`: Версия рабочей цепочки;

* `format`: формат рабочей цепочки, который включает в себя `vm_version` и `vm_mode`.


## Param 13

Этот параметр определяет новый тип данных под названием `ComplaintPricing` со следующими полями:

### Параметры конфигурации: 

* `deposit`: Это поле имеет тип Grams, который, является типом, представляющим количество собственной криптовалюты TON;

* `bit_price`: Это поле определяет занимаемый размер в битах;

* `cell_price`: Это поле определяет стоимость хранения ячейки данных в nano TON.


## Param 14

Этот параметр представляет собой конфигурацию для создания блоков в блокчейне TON, в частности, сборы, связанные с созданием блоков как в masterchain, так и в basechain.

### Параметры конфигурации для создания и вознаграждения блоков: 

* `masterchain_block_fee`: Это поле представляет плату за создание блока в masterchain. Плата указана в виде `nanograms`, которые являются номиналом родной криптовалюты TONCOIN. Сумма сбора представляет собой целое число переменной длины без знака (var_uint) длиной 4 и значением 1700000000.

* `basechain_block_fee`: Аналогично приведенному выше, это поле представляет плату за создание блока в базовой цепи, при этом сумма платы составляет 1000000000 нанограммов.


## Param 15

Этот параметр представляет собой конфигурацию параметров выбора валидатора в блокчейне TON, а также периоды начала и конца процессов. Валидаторы в блокчейн-сети отвечают за создание новых блоков и проверку транзакций. Процесс избрания валидаторов имеет решающее значение во многих блокчейн-системах, особенно в тех, которые используют механизмы консенсуса Proof-of-Stake. 

### Параметры конфигурации для выбора валидатора:

* `validators_elected_for`: Этот параметр представляет период (в блоках, единицах времени или какой-либо другой метрике), в течение которого выбранный валидатор выполняет свою роль.

* `elections_start_before`: Этот параметр указывает, сколько времени должно пройти до окончания текущего периода проверки, когда начнется процесс выборов на следующий период.

* `elections_end_before`: Этот параметр определяет период до окончания текущего срока действия валидатора, к которому должен быть завершен избирательный процесс.

* `stake_held_for`: Этот параметр предоставляет период, на который ставка валидатора заблокирована или удерживается после истечения срока действия.
:::info
Каждое значение в аргументах определяется типом данных `uint32`
:::


## Param 16

Этот параметр представляет собой конфигурацию параметров валидатора в блокчейне TON. 

:::info
Валидаторы - это узлы в блокчейн-сети, которые отвечают за создание новых блоков и проверку транзакций
:::

### Параметры конфигурации количества валидаторов для проведения выборов:

* `max_validators`: Этот параметр представляет максимальное количество валидаторов, которые могут участвовать в сети в любой момент времени.

* `max_main_validators`: Этот параметр представляет максимальное количество "основных" или "первичных" валидаторов. 

* `min_validators`: Этот параметр представляет минимальное количество валидаторов, которые должны участвовать в сети. Сеть может перестать функционировать корректно или оптимально, если количество валидаторов упадет ниже этого порогового значения.

### Условия проведения выборов: 

* `max_validators` >= `max_main_validators` 

* `max_main_validator`s >= `min_validators`

* `min_validators` >= 1 

Они указывают, что максимальное количество валидаторов должно быть больше или равно максимальному количеству основных валидаторов, максимальное количество основных валидаторов должно быть больше или равно минимальному количеству валидаторов, а минимальное количество валидаторов должно быть не менее 1.


## Param 17

Этот параметр представляет собой конфигурацию параметров доли в блокчейне TON. Во многих блокчейн-системах, особенно в тех, которые используют алгоритм консенсуса Proof-of-Stake или делегированный алгоритм консенсуса Proof-of-Stake, заинтересованные стороны (владельцы собственной криптовалюты сети) могут "ставить" свои токены на кон, чтобы участвовать в процессе проверки и получать вознаграждение. Таким образом, в этом параметре заложены 
ограничения на размеры стейков.

### Параметры конфигурации:

* `min_stake`: Этот параметр представляет минимальное количество TONCOIN, которое заинтересованная сторона должна застейкать для участия в процессе валидации.

* `max_stake`: Этот параметр представляет максимальное количество TONCOIN, которое заинтересованная сторона может застейкать в процессе проверки.

* `min_total_stake`: Этот параметр представляет минимальное общее количество размещенных TONCOIN монет, которое должно существовать в сети.

* `max_stake_factor`: Этот параметр является множителем или коэффициентом, который применяется при определенных условиях. 
:::info
Каждое значение в аргументах определяется типом данных `uint32`
:::


## Param 18

Этот параметр представляет собой конфигурацию для определения цен на вычислительные ресурсы в блокчейне TON. Во многих блокчейн-системах пользователи должны платить определенное количество собственной криптовалюты за вычислительные ресурсы (такие как вычислительная мощность и хранилище), которые они используют. Это служит мерой предотвращения спама и стимулирует техническое обслуживание сети. 

### Cловарь параметров платы за хранение:

* `utime_since`: Этот параметр предоставляет начальную временную метку (по времени Unix), начиная с которой применяются указанные цены.

* `bit_price_ps` и `cell_price_ps`: Эти параметры представляют цены на вычислительные ресурсы в секунду в блокчейне TON. 

* `mc_bit_price_ps` и `mc_cell_price_ps`: Эти параметры представляют цены на вычислительные ресурсы конкретно в мастер-цепочке блокчейна TON. Блокчейн TON использует многоцепочечную архитектуру, а мастер-цепочка - это основная цепочка, которая координирует другие цепочки.

:::info
Параметр ожидает данные в формате хэш-карты с 32-битными ключами, где значения относятся к вышеперечисленному словарю. 

* `utime_since` принимает значения в типе данных `uint32`

* Остальные принимают значения в типе данных `uint64`
:::


## Param 20 and 21

Эти параметры определяют параметры конфигурации для цен на хранение в сети мастер-цепочки и ворк-цепочки блокчейна TON.

### Параметры конфигурации:

#### Настройка цен газа: 

* `gas_flat_pfx`: Этот параметр представляет префикс для фиксированных цен на газ и лимитов.

* `flat_gas_limit`: Этот параметр отражает максимальное количество газа, которое может быть потреблено за транзакцию.

* `flat_gas_price`: Этот параметр представляет собой цену на газ в сети.

#### Другое: 

* `gas_price`: Этот параметр отражает цену на газ в сети.

* `gas_limit`: Этот параметр представляет максимальное количество газа, которое может быть потреблено за транзакцию.

* `special_gas_limit`: Этот параметр представляет специальное ограничение на количество газа, которое может быть потреблено за транзакцию.

* `gas_credit`: Этот параметр представляет кредит, который предоставляется транзакциям с целью проверки внешнего сообщения.

* `block_gas_limit`: Этот параметр представляет максимальное количество газа, которое может быть потреблено в пределах одного блока.

* `freeze_due_limit` и `delete_due_limit`: Представляют ограничения, связанные с замораживанием и удалением лимитов.
:::info
Более подробно о `gas_credit` и других параметрах в разделе с внешними сообщениями [здесь](https://docs.ton.org/develop/smart-contracts/guidelines/accept#external-messages)
:::


## Param 22 and 23

Этот параметр представляет собой конфигурацию для ограничения блоков в сети мастер-цепочки блокчейна TON. В терминологии блокчейна ограничения блоков относятся к различным параметрам, которые ограничивают размер или сложность блоков.

### Параметры конфигурации:

`block_limits`: Этот параметр относится к общим ограничениям для блока.
* `bytes`: В этом разделе устанавливаются ограничения на размер блока в байтах.  

* - `param_limits`: Предел недогрузки - это точка, ниже которой сеть пытается увеличить размер блока.

* - `underload`: Недогрузка - это состояние, когда шард понимает, что нагрузки нет и склонен смержиться при желании соседнего шарда.

* - `soft_limit`: Мягкое ограничение - это идеальный максимальный размер.

* - `hard_limit`: Жёсткое ограничение - это абсолютный максимальный размер.

* `gas`: В этом разделе устанавливаются ограничения на количество газа, которое может потреблять блок. Газ в контексте блокчейна - это показатель вычислительной работы. Ограничения на недогрузку, мягкое и жесткое ограничение работают так же, как и для размера в байтах.

* `lt_delta`: В этом разделе устанавливаются ограничения для логической временной дельты (lt). Логическое время - это концепция, используемая в блокчейне TON для упорядочивания событий. Ограничения на недогрузку, мягкое и жесткое ограничение работают так же, как и для размера байта и газа.
:::info
При недостатке нагрузки на шард и, соответсвенно, желании смержиться с соседним, `soft_limit` определяет состояние, сверх которого перестают обрабатываться внутренние (internal) сообщения, но продолжат внешние (external). В случае не попадания в `hard_limit` блок не может выполнять никакие действия по слиянию.
:::

## Param 24 and 25

24 параметр представляет собой конфигурацию для форвардных цен в сети мастер-чейна блокчейна TON. 

25 параметр представляет собой конфигурацию для форвардных цен в остальных случаях.

### Параметры конфигурации, определяющие размеры затрат пересылок:

* `lump_price`: Этот параметр означает базовую цену за пересылку сообщения, независимо от его размера или сложности. 

* `bit_price`: Этот параметр представляет стоимость за бит пересылки сообщения.

* `cell_price`: Этот параметр отражает стоимость пересылки сообщения за ячейку. Ячейка - это базовая единица хранения данных в блокчейне TON. 

* `ihr_price_factor`: Это коэффициент, используемый для расчета стоимости немедленной маршрутизации по гиперкубу (IHR). 
:::info
IHR - это метод доставки сообщений в сети TON Blockchain, при котором сообщения отправляются непосредственно в шард-чейн (shard-chain) их получателя.
:::

* `first_frac`: Этот параметр определяет долю оставшегося остатка, которая будет использована для первого перехода по маршруту сообщения.

* `next_frac`: Этот параметр определяет долю оставшегося остатка, которая будет использоваться для последующих переходов по маршруту сообщения. 


## Param 28

Этот параметр обеспечивает конфигурацию протокола Catchain в блокчейне TON. Catchain - это самый низкоуровневый консенсусный протокол, используемый в TON для достижения согласия между валидаторами. 

### Параметры конфигурации:

* `flags`: Общее поле, которое можно использовать для установки различных двоичных параметров. В данном случае оно равно 0, что означает, что никакие конкретные флаги не установлены.

* `shuffle_mc_validators`: Логическое значение, указывающее, следует ли перетасовывать валидаторы masterchain или нет. Если для этого параметра установлено значение 1, валидаторы будут перетасованы, иначе не будут.

* `mc_catchain_lifetime`: Время жизни основной цепочки в секундах. 

* `shard_catchain_lifetime`: Время жизни цепочек shardchain в секундах. 

* `shard_validators_lifetime`: Время жизни валидаторов сегментов в секундах. 

* `shard_validators_num`: Количество валидаторов в каждой цепочке блоков. 


## Param 29

Данный параметр обеспечивает конфигурацию для консенсусного протокола выше catchain ([Param 28](http://docs.ton.org/develop/howto/network-configs#param-28)) в блокчейне TON. Протокол консенсуса является важнейшим компонентом блокчейн-сети, и он гарантирует, что все узлы согласуют состояние распределенного реестра. 

### Параметры конфигурации:

* `flags`: Общее поле, которое можно использовать для установки различных двоичных параметров. В данном случае оно равно 0, что означает, что никакие конкретные флаги не установлены.

* `new_catchain_ids`: Логическое значение, указывающее, следует ли генерировать новые идентификаторы Catchain. Если для этого параметра установлено значение 1, будут сгенерированы новые идентификаторы. В этом случае ему присвоено значение 1, что означает, что будут сгенерированы новые идентификаторы.

* `round_candidates`: Количество кандидатов, подлежащих рассмотрению в каждом раунде консенсусного протокола. Здесь оно установлено равным 3.

* `next_candidate_delay_ms`: Задержка в миллисекундах перед рассмотрением следующего кандидата в протоколе консенсуса. Здесь он установлен на 2000 мс (2 секунды).

* `consensus_timeout_ms`: Период ожидания в миллисекундах для согласованного протокола. Здесь он установлен на 16000 мс (16 секунд).

* `fast_attempts`: Количество попыток, которые необходимо предпринять для быстрого достижения консенсуса. Здесь оно установлено равным 3.

* `attempt_duration`: Продолжительность каждой попытки в согласованном протоколе. Здесь оно установлено равным 8.

* `catchain_max_deps`: Максимальное количество зависимостей в Catchain. Здесь оно установлено равным 4.

* `max_block_bytes`: Максимальный размер блока в байтах. Здесь он установлен равным 2097152 байтам (2 МБ).

* `max_collated_bytes`: Максимальный размер сопоставляемых данных в байтах. Здесь он установлен равным 2097152 байтам (2 МБ).

* `proto_version`: Версия согласованного протокола. Здесь оно установлено равным 2.

* `catchain_max_blocks_coeff`: Коэффициент максимального количества блоков в Catchain. Здесь оно установлено равным 10000.


## Param 31

Этот параметр представляет конфигурацию адресов смарт-контрактов, с которых не взимается комиссия ни за газ, ни за хранение, а также на которых могут создаваться тик-ток транзакции. В списке обычно присутствуют говернанс-контракты. Параметр представлен в виде бинарной древовидной структуры — дерева Меркла, используемое для эффективного хранения и извлечения данных (HashMap 256).


## Param 32 and 34

Этот параметр отражает предыдущий и нынешний списки валидаторов TON блокчейна в виде двоичного дерева, к которым были обращены претензии при нахождении ошибок в  блоках, для параметра 32 и 34 соответственно. Конфигурация включает в себя список валидаторов, их открытые ключи, веса и адреса.

### Параметры конфигурации:

* `cur_validators`: Это текущий список валидаторов. Валидаторы обычно отвечают за проверку транзакций в блокчейн-сети.

* `utime_since` и `utime_until`: Эти параметры предоставляют период времени, в течение которого эти валидаторы активны.

* `total` и `main`: Эти параметры предоставляют общее количество валидаторов и основных валидаторов в сети.

* `total_weight`: Этот параметр предоставляет общую вычислительную мощность или право голоса валидаторов.

* `list` и `hme_root`: Эти параметры отражают начало древовидной структуры, где каждый узел представляет валидатор. Эта древовидная структура может быть использована для эффективного поиска или сортировки валидаторов.

* `hmn_fork`, `hmn_leaf`, `hm_edge`, `hml_short`, `hml_same`: Эти переменные связаны с древовидной структурой, описывая узлы, ребра, развилки и листья в дереве.

* `validator_addr`, `public_key`, `weight`, `adnl_addr`: Эти параметры предоставляет сведения о каждом валидаторе - их адрес, открытый ключ, вес и другой адрес (возможно, сетевой адрес).


## Param 36

Этот параметр содержит в себе список будущих валидаторов. Становится видимым после успешного проведения процесса выборов, но до того, как раунд еще не начался.

### Параметры конфигурации:

* `next_validators`: Здесь предлагается список или набор следующих валидаторов, которые будут участвовать в процессе выборов.

* `validators_ext`: Этот параметр представляет дополнительную информацию о валидаторах.

* `utime_since`, `utime_until`: Эти параметры представляют временные метки Unix time, указывающие диапазон времени, в течение которого средства проверки активны или действительны. 

* `total`, `main`: Эти параметры представляют общее количество валидаторов и первичных или главных валидаторов соответственно.

* `total_weight`: Этот параметр представляет собой общий вес всех валидаторов. В некоторых алгоритмах консенсуса валидаторы могут иметь разные веса в зависимости от доли, которую они имеют в системе. 

* `list`: Этот параметр представляет собой список или последовательность данных.

* `root`, `hm_edge`, `node`, `hmn_fork`, `hml_short`, `len`, `unary_zero`, `hmn_leaf`: Эти параметры предполагают двоичную древовидную структуру данных. Ребра соединяют узлы, ответвления представляют точки принятия решения, а листья - конечные точки. 

* `validator_addr`, `public_key`, `ed25519_pubkey`, `pubkey`, `weight`, `adnl_addr`: Эти термины связаны с валидаторами в системе. 

* - Открытый ключ является частью пары криптографических ключей, используемых для безопасной связи. 

* - `ed25519` - это специальная система подписи с открытым ключом.

* - `weight` может представлять долю валидатора или право голоса в процессе согласования. 

* - `validator_addr` и `adnl_addr` являются сетевыми адресами валидаторов.



















:::info
Шестнадцатеричная строка в конце параметра блокчейна TON является сериализованным двоичным представлением этой конфигурации, позволяющим эффективно хранить или передавать конфигурацию. Точные детали сериализации зависят от конкретной схемы кодирования, используемой блокчейном TON.
:::



On this page you can find active network configs of TON Blockchain:

* **Mainnet**: https://ton.org/global-config.json
* **Testnet**: https://ton.org/testnet-global.config.json
